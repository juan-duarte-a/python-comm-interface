from comm_interface.ml_comm import CommInterface, Actions
import time

# comm: CommInterface = CommInterface(0, True)
# comm.connect()
# comm.communicate_test(50000)
# comm.send_action(Actions.END)
# comm.close_comm()
# print("Finished!")

time_factor: float = 1 / 2.0
turning_mode: int = 1

comm: CommInterface = CommInterface(latency=0.005*time_factor, verbose_option=True)
comm.connect()

if turning_mode == 0:
    while True:
        time.sleep(1)
        # for i in range(1000):
        #     comm.distance_from_center()
        #     time.sleep(1)
        print(comm.state_parameters)
        comm.send_action(Actions.RUN)
        time.sleep(3.1440718173980713 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.49595141410827637 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.5039870738983154 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1.5199060440063477 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.46399545669555664 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.42399120330810547 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(3.8480470180511475 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.35996508598327637 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.32782840728759766 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.3361194133758545 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.3039357662200928 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.3280210494995117 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(1.8318979740142822 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.5199811458587646 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.45592355728149414 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.5039677619934082 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.5520195960998535 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.4078669548034668 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(3.7441139221191406 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.41591882705688477 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.7360262870788574 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(2.551975727081299 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.40778303146362305 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.4001486301422119 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.8719604015350342 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.46390652656555176 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.4559016227722168 * time_factor)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.7760920524597168 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.4559178352355957 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.4240138530731201 * time_factor)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1)
        # break
elif turning_mode == 1:
    while True:
        time.sleep(1)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_UP)
        time.sleep(0.6799767017364502 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_UP)
        time.sleep(1.6158785820007324 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_DOWN)
        time.sleep(0.5680496692657471 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1.0714836120605469 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(1.7684812545776367 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1.2075283527374268 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(0.6244745254516602 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_UP)
        time.sleep(2.391936779022217 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_DOWN)
        time.sleep(0.2640414237976074 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(2.287393569946289 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(1.7445480823516846 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1.1115200519561768 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(0.6804189682006836 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1.2235357761383057 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(0.27245545387268066 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_UP)
        time.sleep(2.343874454498291 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_DOWN)
        time.sleep(0.5760667324066162 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.9835386276245117 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(0.2803382873535156 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.1595609188079834 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(0.40827059745788574 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_UP)
        time.sleep(1.0401263236999512 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.GEAR_DOWN)
        time.sleep(0.52587559700012207 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(0.9675805568695068 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(1.392397403717041 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_LEFT)
        time.sleep(0.9036009311676025 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)
        time.sleep(0.8904076099395752 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.TURN_RIGHT)
        time.sleep(1.1114819049835205 * time_factor)
        print(comm.state_parameters)
        comm.send_action(Actions.CENTER_WHEEL)

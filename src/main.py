from comm_interface.ml_comm import CommInterface, Actions
import time

# comm: CommInterface = CommInterface(0, True)
# comm.connect()
# comm.communicate_test(50000)
# comm.send_action(Actions.END)
# comm.close_comm()
# print("Finished!")

time_factor: float = 1 / 3.0

comm: CommInterface = CommInterface(latency=0.005*time_factor, verbose_option=True)
comm.connect()


while True:
    time.sleep(1)
    # for i in range(1000):
    #     comm.distance_from_center()
    #     time.sleep(1)
    print(comm.state_parameters)
    comm.send_action(Actions.RUN)
    time.sleep(3.1440718173980713 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.49595141410827637 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.5039870738983154 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(1.5199060440063477 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.46399545669555664 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.42399120330810547 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(3.8480470180511475 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.35996508598327637 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.32782840728759766 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.3361194133758545 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.3039357662200928 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.3280210494995117 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(1.8318979740142822 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.5199811458587646 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.45592355728149414 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.5039677619934082 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.5520195960998535 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.4078669548034668 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(3.7441139221191406 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.41591882705688477 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.7360262870788574 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(2.551975727081299 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.40778303146362305 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.4001486301422119 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.8719604015350342 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.46390652656555176 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.4559016227722168 * time_factor)
    comm.send_action(Actions.TURN_LEFT)
    time.sleep(0.7760920524597168 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.4559178352355957 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(0.4240138530731201 * time_factor)
    comm.send_action(Actions.TURN_RIGHT)
    time.sleep(1)
    # break
